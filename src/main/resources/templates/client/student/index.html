<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css} ">
    <link rel="stylesheet" th:href="@{/css/csu-style.css}">

    <!--乱删了一堆东西，只保留了pagination的相关内容-->
    <!--<link th:href="@{/css/my-bootstrap.min.css}" rel="stylesheet"/>-->
</head>

<body class="csu-iframe-body">

<fieldset class="layui-elem-field">
    <legend class="csu-color-theme"><b>学生列表</b></legend>
    <div class="layui-field-box">

        <div class="layui-row layui-col-space15">

            <div class="layui-col-lg2 layui-col-sm3 layui-col-xs6" th:each="student:${pageInfo.list}">

                <a th:href="@{${'/client/student/student'}(id=${student.rid})}">
                    <div class="csu-card csu-card-hover">
                        <img class="csu-card-img" th:src="${student.image}">
                        <div class="csu-card-name" th:text="${student.name}">肖途</div>
                        <div class="csu-card-post" th:text="${student.post}">胡峰</div>
                        <div class="csu-card-type" th:text="${student.direction}">中共地下党</div>
                    </div>
                </a>

            </div>

        </div>

    </div>
</fieldset>

<div class="csu-page" id="csu-page"></div>

<!--<div class="ibox-footer" align="center">-->

    <!--<ul class="pagination">-->
        <!--<li>-->
            <!--<a th:if="${not isFirstPage}"-->
               <!--th:href="@{${'studentList'}(pageNum=${pageNum-1},pageSize=${pageSize})}"-->
               <!--aria-label="Previous">-->
                <!--<span aria-hidden="true">上一页</span>-->
            <!--</a>-->
            <!--<a th:if="${isFirstPage}" href="javascript:void(0);" aria-label="Previous">-->
                <!--<span aria-hidden="true">上一页</span>-->
            <!--</a>-->
        <!--</li>-->

        <!--<li th:each="pageNo : ${#numbers.sequence(1, totalPages)}">-->
            <!--<a th:if="${pageNum eq pageNo}" href="javascript:void(0);">-->
                <!--<span th:text="${pageNo}"></span>-->
            <!--</a>-->

            <!--<a th:if="${not (pageNum eq pageNo)}"-->
               <!--th:href="@{${'studentList'}(pageNum=${pageNo},pageSize=${pageSize})}">-->
                <!--<span th:text="${pageNo}"></span>-->
            <!--</a>-->
        <!--</li>-->

        <!--<li>-->
            <!--<a th:if="${not isLastPage}"-->
               <!--th:href="@{${'studentList'}(pageNum=${pageNum+1},pageSize=${pageSize})}"-->
               <!--aria-label="Next">-->
                <!--<span aria-hidden="true">下一页</span>-->
            <!--</a>-->
            <!--<a th:if="${isLastPage}" href="javascript:void(0);" aria-label="Next">-->
                <!--<span aria-hidden="true">下一页</span>-->
            <!--</a>-->
        <!--</li>-->
    <!--</ul>-->
<!--</div>-->

<!--这是layui的脚本-->
<script th:src="@{/layui/layui.js}"></script>
<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
<!--[if lt IE 9]>
<script th:src="@{/js/layui/html5.min.js}"></script>
<script th:src="@{/js/layui/respond.min.js}"></script>
<![endif]-->

<!--这是iframeResizer的脚本-->
<script th:src="@{/js/iframe-resizer/iframeResizer.contentWindow.min.js}"></script>

<!--这是自己设定的一些脚本-->
<script>
    layui.use('laypage', function () {
        var laypage = layui.laypage;

        //执行一个laypage实例
        laypage.render({
            elem: 'csu-page'
            , count: 35//从model里取当前总数
            , limit: 12
            , curr: 2//从model里取当前page数
            , jump: function (obj, first) {
                //首次不执行
                if (!first) {
                    console.log(obj.curr);
                    //obj.curr是目标页的index
                    //打开目标页后controller往model里放入学生信息和page数count总数，以便curr，count参数获得
                    window.location.href = "../student/index.html?page=" + obj.curr;
                }
            }
        });
    });
</script>

</body>

</html>